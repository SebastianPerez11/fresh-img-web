---
import Github from "../icons/Github.astro";
import Menu from "../icons/Menu.astro";
---

<header class="w-full flex sticky z-50 justify-center py-6 px-12 max-md:px-2">
  <nav
    class="w-full grid grid-cols-8 gap-10 items-center max-w-[1920px] max-2xl:gap-4 max-xl:grid-cols-6 max-sm:grid-cols-4"
  >
    <picture class="max-md:col-span-2 z-20">
      <a href="/" title="Fresh Img" class="font-semibold text-2xl">Fresh Img</a>
    </picture>

    <div class="flex col-span-2 max-xl:col-span-3 max-sm:col-span-full">
      <input
        class="w-full py-2 px-4 border rounded-full"
        placeholder="Buscador"
        type="text"
        name=""
        id="search"
      />
    </div>

    <div
      class="flex w-full justify-between items-center col-span-3 max-2xl:col-span-4 text-lg max-xl:hidden"
    >
      <a
        title="Inicio"
        href="/"
        class={`transition-colors hover:text-cyan-500 ${Astro.props.home}`}
        >Inicio</a
      >
      <a
        title="HTML5"
        href="/html/"
        class={`transition-colors hover:text-cyan-500 ${Astro.props.html}`}
        >Html</a
      >
      <a
        title="CSS3"
        href="/css/"
        class={`transition-colors hover:text-cyan-500 ${Astro.props.css}`}
        >Css</a
      >
      <a
        title="JavaScript"
        href="/js/"
        class={`transition-colors hover:text-cyan-500 ${Astro.props.js}`}
        >JavaScript</a
      >
      <a
        title="React"
        href="/react/"
        class={`transition-colors hover:text-cyan-500 ${Astro.props.react}`}
        >React</a
      >
      <a
        title="Tailwind"
        href="/tailwind/"
        class={`transition-colors hover:text-cyan-500 ${Astro.props.tailwind}`}
        >Tailwind</a
      >
      <a
        title="Next Js"
        href="/next/"
        class={`transition-colors hover:text-cyan-500 ${Astro.props.next}`}
        >Next Js</a
      >
      <a
        title="Astro Js"
        href="/astrojs/"
        class={`transition-colors hover:text-cyan-500 ${Astro.props.astro}`}
        >Astro</a
      >
    </div>
  </nav>

  <a
    href="https://github.com/SebastianPerez11"
    target="_blank"
    class="place-self-center w-8 h-8 max-xl:hidden"
  >
    <Github class="w-8 transition-colors hover:fill-cyan-500" />
  </a>

  <nav class="flex w-[42px] h-[42px] items-center justify-center xl:hidden">
    <Menu id="iconMenu" class="w-9 h-9 cursor-pointer z-50" />
  </nav>

  <div
    id="menu-nesting"
    class="text-cyan-600 tracking-wide flex py-20 px-4 flex-col gap-6 text-start text-2xl fixed w-full h-screen top-0 bottom-0 translate-x-[100%] transition-transform bg-[#fbfdff] xl:hidden"
  >
    <a
      title="Inicio"
      href="/"
      class={`links transition-colors hover:text-cyan-500 ${Astro.props.home}`}
      >- Inicio</a
    >
    <a
      title="HTML5"
      href="/html/"
      class={`links transition-colors hover:text-cyan-500 ${Astro.props.html}`}
      >- Html</a
    >
    <a
      title="CSS3"
      href="/css/"
      class={`links transition-colors hover:text-cyan-500 ${Astro.props.css}`}
      >- Css</a
    >
    <a
      title="JavaScript"
      href="/js/"
      class={`links transition-colors hover:text-cyan-500 ${Astro.props.js}`}
      >- JavaScript</a
    >
    <a
      title="React"
      href="/react/"
      class={`links transition-colors hover:text-cyan-500 ${Astro.props.react}`}
      >- React</a
    >
    <a
      title="Tailwind"
      href="/tailwind/"
      class={`links transition-colors hover:text-cyan-500 ${Astro.props.tailwind}`}
      >- Tailwind</a
    >
    <a
      title="Next Js"
      href="/next/"
      class={`links transition-colors hover:text-cyan-500 ${Astro.props.next}`}
      >- Next Js</a
    >
    <a
      title="Astro Js"
      href="/astrojs/"
      class={`links transition-colors hover:text-cyan-500 ${Astro.props.astro}`}
      >- Astro</a
    >
  </div>
</header>
<script is:inline>
  function init() {
    const iconMenu = document.querySelector("#iconMenu");
    const menu = document.querySelector("#menu-nesting");
    const body = document.querySelector("#body");
    const links = document.querySelectorAll(".links");

    // Rest of script...
    iconMenu.addEventListener("click", openMenu);

    function openMenu() {
    menu.classList.toggle("translate-x-[100%]");
    body.classList.toggle("overflow-hidden");
  }

  links.forEach((link) => {
    link.addEventListener("click", () => {
      menu.classList.toggle("translate-x-[100%]");
      body.classList.toggle("overflow-hidden");
    });
  });

    // Clean up by destroying instances and removing event listeners
    document.addEventListener(
      "astro:before-swap",
      () => {
        // SomeClass.destroy()
        // document.removeEventListener(...)
      },
      { once: true }
    );
  }

  // Initialize on first load
  init();

  // Re-initialize after swapping pages
  document.addEventListener("astro:after-swap", init);
</script>
